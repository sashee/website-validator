{
  pkgs,
	packageJson,
	packageLockJson,
}:

let
	pJson = pkgs.lib.importJSON ./package.json;

	packageFiles = pkgs.runCommand "package_files" {} ''
mkdir -p $out

cp ${packageJson} $out/package.json
cp ${packageLockJson} $out/package-lock.json
		'';

	npmPackage = pkgs.buildNpmPackage {
		pname = ''${pJson.name}-node_modules'';
		version = pJson.version;
		src = packageFiles;
		nodejs = pkgs.nodePackages_latest.nodejs;

		nativeBuildInputs = [
			pkgs.pkg-config
		];

		buildInputs = [
		];

		dontNpmBuild = true;

		npmFlags = [ "--ignore-scripts" "--include=dev" ];

		npmDeps = pkgs.importNpmLock {
			package = pJson;
			packageLock = pkgs.lib.importJSON ./package-lock.json;
		};

		npmConfigHook = pkgs.importNpmLock.npmConfigHook;
	};
in {
	node_modules = "${npmPackage}/lib/node_modules/${pJson.name}/node_modules";
}
